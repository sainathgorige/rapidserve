[0;34mNo config file found; using defaults[0m

PLAY [Configure VXLAN Tunnels between VPCs in namespaces] **********************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Initialize VNI] **********************************************************
[0;32mok: [localhost] => {"ansible_facts": {"vni_counter": 1109}, "changed": false}[0m

TASK [Create VXLAN Tunnels for each host1_vpc to each host2_vpc] ***************
[0;36mincluded: /home/vmadm/demo/RapidServe/southbound/create_tunnel.yml for localhost => (item={'name': 'ap_in'})[0m

TASK [Setup tunnels for each host1_vpc to each host2_vpc] **********************
[0;36mincluded: /home/vmadm/demo/RapidServe/southbound/configure_tunnel.yml for localhost => (item={'name': 'ap_ge'})[0m

TASK [Get /30 subnet for current VPC pair] *************************************
[0;33mchanged: [localhost] => {"changed": true, "cmd": ["python3", "subnetting.py", "192.168.4.0/24"], "delta": "0:00:00.038519", "end": "2024-04-24 02:03:27.034158", "msg": "", "rc": 0, "start": "2024-04-24 02:03:26.995639", "stderr": "", "stderr_lines": [], "stdout": "192.168.4.36/30", "stdout_lines": ["192.168.4.36/30"]}[0m

TASK [Debug subnet output] *****************************************************
[0;32mok: [localhost] => {[0m
[0;32m    "msg": "Subnet is 192.168.4.36/30"[0m
[0;32m}[0m

TASK [Fetch IP for veth interface inside ap_in] ********************************
[0;32mok: [localhost -> 192.168.38.8] => {"changed": false, "cmd": "ip netns exec ap_in ip -o -4 addr show ap_in_veth1 | awk '{print $4}' | cut -d/ -f1", "delta": "0:00:00.015544", "end": "2024-04-24 02:03:27.736362", "msg": "", "rc": 0, "start": "2024-04-24 02:03:27.720818", "stderr": "", "stderr_lines": [], "stdout": "192.168.100.58", "stdout_lines": ["192.168.100.58"]}[0m

TASK [Set IP for ap_in] ********************************************************
[0;32mok: [localhost] => {"ansible_facts": {"host1_vpc_ip": "192.168.100.58"}, "changed": false}[0m

TASK [Fetch IP for veth interface inside host2_vpc] ****************************
[0;32mok: [localhost -> 192.168.38.9] => {"changed": false, "cmd": "ip netns exec ap_ge ip -o -4 addr show ap_ge_veth1 | awk '{print $4}' | cut -d/ -f1", "delta": "0:00:00.020399", "end": "2024-04-24 02:03:28.394627", "msg": "", "rc": 0, "start": "2024-04-24 02:03:28.374228", "stderr": "", "stderr_lines": [], "stdout": "192.168.100.62", "stdout_lines": ["192.168.100.62"]}[0m

TASK [Set IP for host2_vpc] ****************************************************
[0;32mok: [localhost] => {"ansible_facts": {"host2_vpc_ip": "192.168.100.62"}, "changed": false}[0m

TASK [Create tunnel interface inside host1_vpc] ********************************
[0;33mchanged: [localhost -> 192.168.38.8] => {"changed": true, "cmd": ["ip", "netns", "exec", "ap_in", "ip", "link", "add", "name", "vxlan1109", "type", "vxlan", "id", "1109", "local", "192.168.100.58", "remote", "192.168.100.62", "dstport", "4789"], "delta": "0:00:00.012184", "end": "2024-04-24 02:03:29.099854", "msg": "", "rc": 0, "start": "2024-04-24 02:03:29.087670", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Assign IP to the tunnel interface inside host1_vpc] **********************
[0;33mchanged: [localhost -> 192.168.38.8] => {"changed": true, "cmd": ["ip", "netns", "exec", "ap_in", "ip", "addr", "add", "192.168.4.37/30", "dev", "vxlan1109"], "delta": "0:00:00.007268", "end": "2024-04-24 02:03:29.770547", "msg": "", "rc": 0, "start": "2024-04-24 02:03:29.763279", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Create tunnel interface inside host2_vpc] ********************************
[0;33mchanged: [localhost -> 192.168.38.9] => {"changed": true, "cmd": ["ip", "netns", "exec", "ap_ge", "ip", "link", "add", "name", "vxlan1109", "type", "vxlan", "id", "1109", "local", "192.168.100.62", "remote", "192.168.100.58", "dstport", "4789"], "delta": "0:00:00.018083", "end": "2024-04-24 02:03:30.352995", "msg": "", "rc": 0, "start": "2024-04-24 02:03:30.334912", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Assign IP to the tunnel interface inside host2_vpc] **********************
[0;33mchanged: [localhost -> 192.168.38.9] => {"changed": true, "cmd": ["ip", "netns", "exec", "ap_ge", "ip", "addr", "add", "192.168.4.38/30", "dev", "vxlan1109"], "delta": "0:00:00.020764", "end": "2024-04-24 02:03:30.981734", "msg": "", "rc": 0, "start": "2024-04-24 02:03:30.960970", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Add route for local tunnel endpoint IP to veth1 interface IP on host1] ***
[0;33mchanged: [localhost -> 192.168.38.8] => {"changed": true, "cmd": ["ip", "route", "add", "192.168.4.37/32", "via", "192.168.100.58"], "delta": "0:00:00.009418", "end": "2024-04-24 02:03:31.693587", "msg": "", "rc": 0, "start": "2024-04-24 02:03:31.684169", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Add route for local tunnel endpoint IP to veth1 interface IP on host2] ***
[0;33mchanged: [localhost -> 192.168.38.9] => {"changed": true, "cmd": ["ip", "route", "add", "192.168.4.38/32", "via", "192.168.100.62"], "delta": "0:00:00.012379", "end": "2024-04-24 02:03:32.358969", "msg": "", "rc": 0, "start": "2024-04-24 02:03:32.346590", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}[0m

TASK [Add route for remote tunnel endpoint IP to GRE tunnel next hop on host1] ***
[0;31mfatal: [localhost -> 192.168.38.8]: FAILED! => {"changed": true, "cmd": ["ip", "route", "add", "192.168.4.38/32", "via", "192.168.4.2"], "delta": "0:00:00.012448", "end": "2024-04-24 02:03:33.053256", "msg": "non-zero return code", "rc": 2, "start": "2024-04-24 02:03:33.040808", "stderr": "RTNETLINK answers: File exists", "stderr_lines": ["RTNETLINK answers: File exists"], "stdout": "", "stdout_lines": []}[0m

PLAY RECAP *********************************************************************
[0;31mlocalhost[0m                  : [0;32mok=16  [0m [0;33mchanged=7   [0m unreachable=0    [0;31mfailed=1   [0m skipped=0    rescued=0    ignored=0   
